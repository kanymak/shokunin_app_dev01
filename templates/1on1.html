<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>1on1ã®è¨˜éŒ²</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/dist/output.css') }}">
  <!--<link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">-->
  <body class="bg-gray-100 p-2 font-sans">
    <div class="okr-container max-w-4xl mx-auto p-4 bg-white shadow-md rounded-md">
    <div class="text-right mb-4">
      <a href="{{ url_for('index') }}" class="text-blue-600 hover:underline">ã€ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹ã€‘</a>
    </div>
    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <div class="text-center mb-6 border-b pb-4">
      <h1 class="text-3xl font-bold text-gray-800 mb-2">1on1ã®è¨˜éŒ²ï¼ˆå¯¾è©±ã‚’å¢—ã‚„ãã†ï¼‰</h1>
      <p class="text-gray-600">è·äººã¨ã—ã¦ã®æˆé•·ã‚’ç›®æŒ‡ã™ãŸã‚ã«ï¼</p>
    </div>

    <!-- ã‚¿ãƒ–åˆ‡æ›¿ -->
    <div class="flex border-b mb-6">
      <div class="tab active-tab cursor-pointer py-2 px-4 border-b-2 border-blue-500 text-blue-600" id="tab-manager" onclick="switchTab('manager')">ä¸Šå¸ã¨ã®1on1</div>
      <div class="tab inactive-tab cursor-pointer py-2 px-4 text-gray-500 hover:text-gray-700" id="tab-expert" onclick="switchTab('expert')">ã‚³ãƒ¼ãƒï¼ˆå¤–éƒ¨ï¼‰ã¨ã®1on1</div>
    </div>

    <!-- ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¨ãƒªã‚¢ -->
    <div class="mt-6">
      
      <!-- ä¸Šå¸ã¨ã®1on1ã‚¿ãƒ–å†…å®¹ -->
      <div id="content-manager">
        <!-- æ¦‚è¦ãƒ‘ãƒãƒ« -->
        <div class="mb-6 p-4 border rounded-md bg-gray-50">
          <h2 class="text-xl font-semibold mb-4 text-gray-700 flex items-center"><span class="mr-2">ğŸ“…</span>æ¦‚è¦</h2>
          <div class="mb-4">
            <label for="frequency" class="block mb-1 font-medium text-gray-700">é–‹å‚¬é »åº¦</label>
            <select id="frequency" class="w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
              <option value="quarterly">ï¼“ã‹æœˆæ¯</option>
              <option value="semiannually">åŠå¹´æ¯</option>
              <option value="monthly">æ¯æœˆ</option>
            </select>
          </div>
          <div class="mb-4">
            <label for="nextDate" class="block mb-1 font-medium text-gray-700">æ¬¡å›äºˆå®šæ—¥</label>
            <input type="date" id="nextDate" class="w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
          </div>
          <p class="mt-2 text-gray-600">å‰å›ã®æŒ¯ã‚Šè¿”ã‚Šãƒ¡ãƒ¢ï¼š<span id="prevSummary">ä»¥ä¸‹ã«å‰å›ã®è­°äº‹éŒ²è¦ç´„ãŒè¡¨ç¤ºã•ã‚Œã¾ã™</span></p>
        </div>

        <!-- è©³ç´°è¨˜éŒ²ã‚¨ãƒªã‚¢ -->
        <div class="mb-6 p-4 border rounded-md bg-gray-50">
          <h2 class="text-xl font-semibold mb-4 text-gray-700 flex items-center"><span class="mr-2">ğŸ“</span>è©³ç´°è¨˜éŒ²</h2>
          <!-- OKRé€²æ—çŠ¶æ³ -->
          <div class="mb-4">
            <label for="okr" class="block mb-1 font-medium text-gray-700">OKRé€²æ—çŠ¶æ³</label>
            <textarea id="okr" rows="3" placeholder="OKRã®é€²æ—çŠ¶æ³ã‚’è¨˜å…¥" class="w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
            <button class="mt-1 px-3 py-1 bg-blue-500 text-white rounded-md hover:bg-blue-600 text-sm" onclick="startVoiceInput('okr')">ğŸ¤ éŸ³å£°å…¥åŠ›</button>
          </div>
          <!-- ã‚³ãƒ³ãƒ”ãƒ†ãƒ³ã‚·ãƒ¼è©•ä¾¡ -->
          <div class="mb-4">
            <label for="competency" class="block mb-1 font-medium text-gray-700">ã‚³ãƒ³ãƒ”ãƒ†ãƒ³ã‚·ãƒ¼è©•ä¾¡</label>
            <textarea id="competency" rows="3" placeholder="è‡ªå·±è©•ä¾¡ã‚„ä¸Šå¸ã‹ã‚‰ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’è¨˜å…¥" class="w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
            <button class="mt-1 mr-2 px-3 py-1 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 text-sm" onclick="insertTemplate('competency')">é …ç›®ä¾‹ã®æŒ¿å…¥</button>
            <button class="mt-1 px-3 py-1 bg-blue-500 text-white rounded-md hover:bg-blue-600 text-sm" onclick="startVoiceInput('competency')">ğŸ¤ éŸ³å£°å…¥åŠ›</button>
          </div>
          <!-- è·å‹™åŠ›é‡è©•ä¾¡ -->
          <div class="mb-4">
            <label for="workPower" class="block mb-1 font-medium text-gray-700">è·å‹™åŠ›é‡è©•ä¾¡</label>
            <textarea id="workPower" rows="3" placeholder="è·å‹™åŠ›é‡ã«ã¤ã„ã¦ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚’è¨˜å…¥" class="w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
            <button class="mt-1 px-3 py-1 bg-blue-500 text-white rounded-md hover:bg-blue-600 text-sm" onclick="startVoiceInput('workPower')">ğŸ¤ éŸ³å£°å…¥åŠ›</button>
          </div>
          <!-- è­°äº‹éŒ² -->
          <div class="mb-4">
            <label for="meetingMinutes" class="block mb-1 font-medium text-gray-700">ãã®ä»–ã«è©±ã—ãŸå†…å®¹ã®ãƒ¡ãƒ¢</label>
            <textarea id="meetingMinutes" rows="5" placeholder="è­°é¡Œã€è­°è«–å†…å®¹ã€æ±ºå®šäº‹é …ã€æ¬¡å›ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¨˜å…¥" class="w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
            <button class="mt-1 mr-2 px-3 py-1 bg-green-500 text-white rounded-md hover:bg-green-600 text-sm" onclick="generateSummary()">AIè‡ªå‹•è¦ç´„ã®ç”Ÿæˆ</button>
            <button class="mt-1 px-3 py-1 bg-blue-500 text-white rounded-md hover:bg-blue-600 text-sm" onclick="startVoiceInput('meetingMinutes')">ğŸ¤ éŸ³å£°å…¥åŠ›</button>
          </div>
          <!-- ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ -->
          <div class="mb-4">
            <label for="feedback" class="block mb-1 font-medium text-gray-700">ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯</label>
            <textarea id="feedback" rows="3" placeholder="ä¸Šå¸ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚’è¨˜å…¥" class="w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
            <button class="mt-1 px-3 py-1 bg-blue-500 text-white rounded-md hover:bg-blue-600 text-sm" onclick="startVoiceInput('feedback')">ğŸ¤ éŸ³å£°å…¥åŠ›</button>
          </div>
          <div class="text-right">
            <button class="px-6 py-2 bg-red-500 text-white font-semibold rounded-md hover:bg-red-600" onclick="saveRecord('manager')">è¨˜éŒ²ã‚’ä¿å­˜</button>
          </div>
        </div>

        <!-- è©•ä¾¡ãƒ‡ãƒ¼ã‚¿è§£æã‚¨ãƒªã‚¢ -->
        <div class="mb-6 p-4 border rounded-md bg-gray-50">
          <h2 class="text-xl font-semibold mb-4 text-gray-700 flex items-center"><span class="mr-2">ğŸ“Š</span>è©•ä¾¡ãƒ‡ãƒ¼ã‚¿è§£æ</h2>
          <p class="text-gray-600 mb-4">
            éå»ã®è©•ä¾¡ãƒ‡ãƒ¼ã‚¿ã‚’ã‚‚ã¨ã«ã€æ©Ÿæ¢°å­¦ç¿’ã‚’æ´»ç”¨ã—ã¦æˆé•·ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚„æ”¹å–„ç‚¹ã‚’æŠ½å‡ºã—ãŸçµæœãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚
          </p>
          <div class="w-full bg-gray-200 rounded-full h-2.5 mb-4">
            <!-- ä¾‹ï¼š70%ã‚’é€²æ—ã¨ã—ã¦è¡¨ç¤º -->
            <div class="bg-blue-600 h-2.5 rounded-full" style="width: 70%;"></div>
          </div>
          <p class="text-gray-600">
            ã‚¢ãƒ‰ãƒã‚¤ã‚¹ï¼šæ¬¡ã¯ã€ä½œæ¥­ã®åŠ¹ç‡åŒ–ã¨ãƒãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®å‘ä¸Šã«å–ã‚Šçµ„ã‚“ã§ã¿ã¾ã—ã‚‡ã†ã€‚
          </p>
        </div>
      </div>
      
      <!-- å¤–éƒ¨å°‚é–€å®¶ã¨ã®1on1ã‚¿ãƒ–å†…å®¹ -->
      <div id="content-expert" style="display:none;">
        <!-- æ¦‚è¦ãƒ‘ãƒãƒ« -->
        <div class="mb-6 p-4 border rounded-md bg-gray-50">
          <h2 class="text-xl font-semibold mb-4 text-gray-700 flex items-center"><span class="mr-2">ğŸ“…</span>æ¦‚è¦</h2>
          <p class="text-gray-600 mb-4">ã€ç›®çš„ã€‘å®¢è¦³çš„ãªè¦–ç‚¹ã§ã®åŠ©è¨€ã‚„ã‚µãƒãƒ¼ãƒˆï¼šã€è‚©ã®åŠ›ã‚’æŠœã„ã¦ã€æ°—æ¥½ã«è©±ã—ã¾ã—ã‚‡ã†ã€‚ã€</p>
          <div class="mb-4">
            <label for="expertNextDate" class="block mb-1 font-medium text-gray-700">ã€æ¬¡å›äºˆå®šæ—¥ã€‘</label>
            <input type="date" id="expertNextDate" class="w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
          </div>
          <p class="mt-2 text-gray-600">å‰å›ã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹ï¼š<span id="expertPrevAdvice">ã“ã“ã«å‰å›ã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã®è¦ç´„ãŒè¡¨ç¤ºã•ã‚Œã¾ã™</span></p>
        </div>

        <!-- è©³ç´°è¨˜éŒ²ã‚¨ãƒªã‚¢ -->
        <div class="mb-6 p-4 border rounded-md bg-gray-50">
          <h2 class="text-xl font-semibold mb-4 text-gray-700 flex items-center"><span class="mr-2">ğŸ“</span>è©³ç´°è¨˜éŒ²</h2>
          <!-- ãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°å†…å®¹ -->
          <div class="mb-4">
            <label for="expertContent" class="block mb-1 font-medium text-gray-700">ãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°å†…å®¹</label>
            <textarea id="expertContent" rows="5" placeholder="è©±ã—åˆã£ãŸå†…å®¹ã®ãƒ¡ãƒ¢ã€ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã€ç–‘å•ç‚¹ãªã©ã‚’è¨˜å…¥" class="w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
            <button class="mt-1 px-3 py-1 bg-blue-500 text-white rounded-md hover:bg-blue-600 text-sm" onclick="startVoiceInput('expertContent')">ğŸ¤ éŸ³å£°å…¥åŠ›</button>
          </div>
          <!-- ãƒ•ã‚©ãƒ­ãƒ¼ã‚¢ãƒƒãƒ— -->
          <div class="mb-4">
            <label for="followUp" class="block mb-1 font-medium text-gray-700">ãƒ•ã‚©ãƒ­ãƒ¼ã‚¢ãƒƒãƒ—</label>
            <textarea id="followUp" rows="3" placeholder="æ¬¡å›ã®èª²é¡Œã‚„å­¦ç¿’é …ç›®ã‚’è¨˜å…¥" class="w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
            <button class="mt-1 px-3 py-1 bg-blue-500 text-white rounded-md hover:bg-blue-600 text-sm" onclick="startVoiceInput('followUp')">ğŸ¤ éŸ³å£°å…¥åŠ›</button>
          </div>
          <!-- è‡ªå·±æŒ¯ã‚Šè¿”ã‚Š -->
          <div class="mb-4">
            <label for="selfReflection" class="block mb-1 font-medium text-gray-700">è‡ªå·±æŒ¯ã‚Šè¿”ã‚Š</label>
            <textarea id="selfReflection" rows="3" placeholder="ä»Šæ—¥ã®å­¦ã³ã€æ¬¡ã«æ´»ã‹ã™ãƒã‚¤ãƒ³ãƒˆã‚’è¨˜å…¥" class="w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
            <button class="mt-1 px-3 py-1 bg-blue-500 text-white rounded-md hover:bg-blue-600 text-sm" onclick="startVoiceInput('selfReflection')">ğŸ¤ éŸ³å£°å…¥åŠ›</button>
          </div>
          <!-- è³‡æ–™æ·»ä»˜ -->
          <div class="mb-4">
            <label for="fileAttachment" class="block mb-1 font-medium text-gray-700">è³‡æ–™æ·»ä»˜</label>
            <input type="file" id="fileAttachment" class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100">
          </div>
          <!-- è³ªå•é …ç›®ã®ä¾‹ -->
          <div class="mb-4">
            <button class="px-3 py-1 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 text-sm" onclick="showRecommendedQuestions()">è©±ã™å†…å®¹ã®ã‚¤ãƒ¡ãƒ¼ã‚¸</button>
            <div id="questionSuggestions" style="display: none;" class="mt-2 p-3 bg-yellow-50 border border-yellow-200 rounded-md text-sm text-gray-700">
              <ul class="list-disc list-inside">
                <li>ã€Œè‰¯ã‹ã£ãŸã“ã¨ã€è©±ã—ãŸã„ã“ã¨ã€ã€ã€Œç›®æ¨™ã®é€²æ—çŠ¶æ³ã€ã€ã€Œæ”¹å–„ã—ãŸã„ã“ã¨ã€ã§ããŸã“ã¨ã€ã€ã€Œæ°—ã«ãªã‚‹ã“ã¨ã€å›°ã£ã¦ã„ã‚‹ã“ã¨ã€ã€ã€Œä»Šå¾Œã®ç›®æ¨™ã€æ¬¡ã¾ã§ã®ç›®æ¨™ã€</li>
              </ul>
            </div>
          </div>
          <div class="text-right">
            <button class="px-6 py-2 bg-red-500 text-white font-semibold rounded-md hover:bg-red-600" onclick="saveRecord('expert')">è¨˜éŒ²ã‚’ä¿å­˜</button>
          </div>
        </div>
      </div>

    </div>
    <div class="text-right mt-4">
      <a href="{{ url_for('index') }}" class="text-blue-600 hover:underline">ã€ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹ã€‘</a>
    </div>
  </div>

  <script>
    // ã‚¿ãƒ–åˆ‡æ›¿æ©Ÿèƒ½
    function switchTab(tabName) {
      const tabManager = document.getElementById('tab-manager');
      const tabExpert = document.getElementById('tab-expert');
      const contentManager = document.getElementById('content-manager');
      const contentExpert = document.getElementById('content-expert');

      // Reset both tabs to inactive state first
      tabManager.classList.remove('active-tab', 'border-blue-500', 'text-blue-600');
      tabManager.classList.add('inactive-tab', 'text-gray-500', 'hover:text-gray-700');
      tabExpert.classList.remove('active-tab', 'border-blue-500', 'text-blue-600');
      tabExpert.classList.add('inactive-tab', 'text-gray-500', 'hover:text-gray-700');

      if (tabName === 'manager') {
        // Activate manager tab
        tabManager.classList.remove('inactive-tab', 'text-gray-500', 'hover:text-gray-700');
        tabManager.classList.add('active-tab', 'border-blue-500', 'text-blue-600');
        contentManager.style.display = 'block';
        contentExpert.style.display = 'none';
      } else if (tabName === 'expert') {
         // Activate expert tab
        tabExpert.classList.remove('inactive-tab', 'text-gray-500', 'hover:text-gray-700');
        tabExpert.classList.add('active-tab', 'border-blue-500', 'text-blue-600');
        contentExpert.style.display = 'block';
        contentManager.style.display = 'none';
      }
    }

    // ä¿å­˜ãƒœã‚¿ãƒ³æŠ¼ä¸‹æ™‚ã®ã‚µãƒ³ãƒ—ãƒ«å‹•ä½œ
    function saveRecord(type) {
      if (type === 'manager') {
        alert('ä¸Šå¸ã¨ã®1on1è¨˜éŒ²ã‚’ä¿å­˜ã—ã¾ã—ãŸã€‚');
      } else if (type === 'expert') {
        alert('å¤–éƒ¨å°‚é–€å®¶ã¨ã®1on1è¨˜éŒ²ã‚’ä¿å­˜ã—ã¾ã—ãŸã€‚');
      }
    }

    // ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæŒ¿å…¥ï¼ˆä¾‹ï¼šã‚³ãƒ³ãƒ”ãƒ†ãƒ³ã‚·ãƒ¼è©•ä¾¡ç”¨ï¼‰
    function insertTemplate(fieldId) {
      if (fieldId === 'competency') {
        document.getElementById('competency').value = "ã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã€‘\nãƒ»å¼·ã¿ï¼š\nãƒ»æ”¹å–„ç‚¹ï¼š\nãƒ»æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼š";
      }
    }

    // è‡ªå‹•ã‚µãƒãƒªãƒ¼ç”Ÿæˆï¼ˆã‚·ãƒ³ãƒ—ãƒ«ãªä¾‹ï¼‰
    function generateSummary() {
      const minutes = document.getElementById('meetingMinutes').value;
      if (minutes.trim() === "") {
        alert("è­°äº‹éŒ²ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚");
      } else {
        // ä¾‹ã¨ã—ã¦å…¥åŠ›å†…å®¹ã®å…ˆé ­50æ–‡å­—ã‚’ã‚µãƒãƒªãƒ¼ã¨ã—ã¦è¡¨ç¤º
        alert("è‡ªå‹•ã‚µãƒãƒªãƒ¼ï¼š\n" + minutes.substring(0, 50) + "...");
      }
    }

    // ãŠã™ã™ã‚è³ªå•ä¾‹ã®è¡¨ç¤ºåˆ‡æ›¿
    function showRecommendedQuestions() {
      const elem = document.getElementById('questionSuggestions');
      if (elem.style.display === 'none' || elem.style.display === '') {
        elem.style.display = 'block';
      } else {
        elem.style.display = 'none';
      }
    }

    // éŸ³å£°å…¥åŠ›ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
    function startVoiceInput(fieldId) {
      // ã“ã“ã§ã¯ã‚·ãƒ³ãƒ—ãƒ«ã«ã‚¢ãƒ©ãƒ¼ãƒˆè¡¨ç¤ºã§ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
      alert("éŸ³å£°å…¥åŠ›ã‚’é–‹å§‹ã—ã¾ã™ã€‚ï¼ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼š" + fieldId + "ï¼‰");
      // å®Ÿéš›ã®å®Ÿè£…ã§ã¯ã€éŸ³å£°èªè­˜APIã¨ã®é€£æºå¾Œã€ãƒ†ã‚­ã‚¹ãƒˆå¤‰æ›çµæœã‚’å¯¾è±¡ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«åæ˜ ã™ã‚‹
    }
  </script>

</body>
</html>
